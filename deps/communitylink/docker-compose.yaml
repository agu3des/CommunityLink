services:
  web:
    build: .
    command: python manage.py runserver 0.0.0.0:8000
    volumes:
      - .:/app
    ports:
      - "8080:8000"

  # Serviço para rodar TODOS os testes
  tests:
    build: .
    command: pytest --cov=. --cov-report=xml --cov-report=html
    volumes:
      - .:/app

  # Serviço para rodar apenas testes básicos (CRUD implementado)
  tests-basic:
    build: .
    command: pytest acoes/tests/test_models.py acoes/tests/test_forms.py -v --cov=acoes.models --cov=acoes.forms
    volumes:
      - .:/app
