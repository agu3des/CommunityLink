{% extends 'acoes/base.html' %}

{% block title %}Minhas Notificações{% endblock %}

{% block content %}
<div class="profile-container">
    
    <div class="profile-header">
        <h1>Minhas Notificações</h1>
        
        {% if lidas_count > 0 %}
            <form method="POST" action="{% url 'acoes:notificacoes_clear' %}">
                {% csrf_token %}
                <button type="submit" class="btn-danger">
                    Limpar Lidas ({{ lidas_count }})
                </button>
            </form>
        {% endif %}
    </div>

    <div class="profile-content" style="padding: 0;"> {% if not notificacoes %}
            <div style="padding: 2rem; text-align: center;">
                <p style="color: #6b7280;">Você não tem nenhuma notificação.</p>
            </div>
        {% else %}
            <ul class="notification-list">
                {% for notificacao in notificacoes %}
                    <li class="notification-item {% if not notificacao.lida %}unread-bg{% endif %}">
                        {% if notificacao.link %}
                            <a href="{{ notificacao.link }}" class="notification-link">
                                <div class="notification-body">
                                    <p class="notification-text {% if not notificacao.lida %}unread{% endif %}">
                                        {{ notificacao.mensagem }}
                                    </p>
                                    <span class="notification-time">
                                        {{ notificacao.created_at|timesince }} atrás
                                    </span>
                                </div>
                            </a>
                        {% else %}
                            <div class="notification-body non-link">
                                <p class="notification-text {% if not notificacao.lida %}unread{% endif %}">
                                    {{ notificacao.mensagem }}
                                </p>
                                <span class="notification-time">
                                    {{ notificacao.created_at|timesince }} atrás
                                </span>
                            </div>
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>
        {% endif %}
    </div>

    <div style="margin-top: 1.5rem;">
        {% include 'acoes/_pagination.html' with page_obj=notificacoes %}
    </div>

</div>
{% endblock %}