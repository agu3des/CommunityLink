{% extends 'acoes/base.html' %}

{% block title %}Ações - CommunityLink{% endblock %}

{% block content %}
    <h1 class="page-title">Ações Comunitárias</h1>

    <!-- Inclui o formulário de filtro -->
    {% include 'acoes/_filter_form.html' %}

    <div class="grid-list">
        {% for acao in acoes %}
            <div class="grid-item third">
                <article class="card-acao">
                    <div>
                        <span class="badge">{{ acao.get_categoria_display }}</span>
                        <h2 class="card-title">{{ acao.titulo }}</h2>
                        <p class="muted"><strong>Data:</strong> <span class="item-date">{{ acao.data|date:"d/m/Y H:i" }}</span></p>
                        <p class="muted"><strong>Local:</strong> <span class="location">{{ acao.local }}</span></p>
                        <p class="prose">{{ acao.descricao|truncatewords:20 }}</p>
                    </div>
                    <div class="actions" style="margin-top:0.75rem; justify-content:space-between; align-items:center;">
                        <a href="{{ acao.get_absolute_url }}" class="btn btn-primary">Ver Detalhes</a>
                        {% if acao.esta_cheia %}
                            <span class="muted">Vagas Esgotadas</span>
                        {% else %}
                            <span class="muted">Há vagas!</span>
                        {% endif %}
                    </div>
                </article>
            </div>
        {% empty %}
            <p class="muted">Nenhuma ação encontrada.</p>
        {% endfor %}
    </div>
{% endblock %}